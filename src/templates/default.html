<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="$lang$" xml:lang="$lang$"$if(dir)$ dir="$dir$"$endif$>
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    $for(author-meta)$
    <meta name="author" content="$author-meta$" />
    $endfor$
    $if(date-meta)$
    <meta name="dcterms.date" content="$date-meta$" />
    $endif$
    $if(keywords)$
    <meta name="keywords" content="$for(keywords)$$keywords$$sep$, $endfor$" />
    $endif$
    <title>$if(title-prefix)$$title-prefix$ â€“ $endif$$pagetitle$</title>
    <!-- relative to template path (in ./root/templates folder) -->
    <style>
      $styles.html()$
      $../../assets/css/tufte.css()$
    </style>
    $for(css)$
    <link rel="stylesheet" href="$css$" />
    $endfor$
    $if(math)$
    $math$
    $endif$
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
    <![endif]-->
    $for(header-includes)$
    $header-includes$
    $endfor$
  </head>
  <body>
    <main id="main-content" class="main-content">
      <!-- sidebar left -->
      <nav id="$idprefix$TOC" class="sidebar-left" role="doc-toc">
        <div id="toc-content">
          <div id="lbar-buttons">
            <span><b>Sticky</b></span>
            <label class="switch" id="toggle-sidebar">
              <input id="input-toggle-sidebar" type="checkbox">
              <span class="slider round"></span>
            </label>
          </div>
          $if(toc)$
          $if(toc-title)$
          <h2 id="$idprefix$toc-title">$toc-title$</h2>
          $endif$
          $table-of-contents$
          $endif$
        </div>
      </nav>

      <!-- main -->
      <div id="text-body">
        $for(include-before)$
        $include-before$
        $endfor$
        $if(title)$
        <header id="title-block-header">
          <h1 class="title">$title$</h1>
          $if(subtitle)$
          <p class="subtitle">$subtitle$</p>
          $endif$
          $for(author)$
          <p class="author">$author$</p>
          $endfor$
          $if(date)$
          <p class="date">$date$</p>
          $endif$
        </header>
        $endif$

        $body$
        $for(include-after)$
        $include-after$
        $endfor$
      </div>
      <img src="" alt="">
      <!-- sidebar right -->
      <div class="siderbar-right">
      </div>

    </main>

    <script>
    const btnDownSvg = ``;
    const mainTocElements = document.querySelectorAll(`#toc-content > ul > li > a`);
    const svgBtnDown = `<svg class="btn-svg-down" width="20" height="10">
      <polyline points="16,0 8,8, 0,0"/>
  </svg>`;
    const svgBtnUp = `<svg class="btn-svg-up" width="20" height="20">
      <polyline points="16,8 8,0 0,8"/>
  </svg>`;

    mainTocElements.forEach((tocEl) => {
         tocEl.innerHTML += `<a class="btn-toc-toggle" href=""></a>`;
         const btn = tocEl.querySelector(`.btn-toc-toggle`);

         if (tocEl.parentElement.querySelector(`ul`)){
         // init
           btn.innerHTML = svgBtnDown;
           btn.addEventListener("click", (ev) => {
            ev.preventDefault();
            const nestedEl = tocEl.parentElement.querySelector(`ul`);
            if (nestedEl.style.display === "none" || !nestedEl.style.display) {
              nestedEl.style.display = "block";
              btn.innerHTML = svgBtnUp;
            } else {
              nestedEl.style.display = "none";
              btn.innerHTML = svgBtnDown;
            }
           });
         }
      });
    </script>

  </body>
</html>
